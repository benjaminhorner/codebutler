var kindOf = require('./kindOf');
var isPlainObject = require('./isPlainObject');
var mixIn = require('../object/mixIn');

    /**
     * Clone native types.
     */
    /**
     * Description
     * @method clone
     * @param {} val
     * @return 
     */
    function clone(val){
        switch (kindOf(val)) {
            case 'Object':
                return cloneObject(val);
            case 'Array':
                return cloneArray(val);
            case 'RegExp':
                return cloneRegExp(val);
            case 'Date':
                return cloneDate(val);
            default:
                return val;
        }
    }

    /**
     * Description
     * @method cloneObject
     * @param {} source
     * @return 
     */
    function cloneObject(source) {
        if (isPlainObject(source)) {
            return mixIn({}, source);
        } else {
            return source;
        }
    }

    /**
     * Description
     * @method cloneRegExp
     * @param {} r
     * @return NewExpression
     */
    function cloneRegExp(r) {
        var flags = '';
        flags += r.multiline ? 'm' : '';
        flags += r.global ? 'g' : '';
        flags += r.ignorecase ? 'i' : '';
        return new RegExp(r.source, flags);
    }

    /**
     * Description
     * @method cloneDate
     * @param {} date
     * @return NewExpression
     */
    function cloneDate(date) {
        return new Date(+date);
    }

    /**
     * Description
     * @method cloneArray
     * @param {} arr
     * @return CallExpression
     */
    function cloneArray(arr) {
        return arr.slice();
    }

    module.exports = clone;


